(()=>{"use strict";var e,t={275:()=>{const e=window.wp.element,t=window.wp.blocks,l=window.wp.blockEditor,n=window.wp.i18n,a=window.wp.components;function o({children:t,title:l}){const[o,r]=(0,e.useState)(!1),i=()=>r(!1);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",null," ",(0,e.createElement)(a.Button,{variant:"link",onClick:()=>r(!0)},(0,n.__)("More","autogrid-block"))),o&&(0,e.createElement)(a.Modal,{title:l,onRequestClose:i},(0,e.createElement)("div",{style:{maxWidth:"350px"}},t),(0,e.createElement)(a.Flex,{direction:"row",justify:"flex-end"},(0,e.createElement)(a.Button,{variant:"secondary",onClick:i},(0,n.__)("Ok","autogrid-block")))))}class r{STYLE_CSS="";QUERY_AND_PROPS_CSS={};constructor({selector:e,otherData:t}){this.selector=e||"",this.otherData=t||{}}apply({sizes:e,propName:t}){e=e.map(this.format).filter(this.checkIsValidItem);let l=this.getLastBase(e);return(e=e.filter((e=>!this.checkIsBaseItem(e)))).forEach((e=>this.dataCollection(e,t))),this.queryAndProps_toStyleCSS(),l}format(e){return{value:parseInt(e.value),min:parseInt(e.min),max:parseInt(e.max)}}checkIsValidItem=e=>!isNaN(e.value);checkIsBaseItem(e){return isNaN(e.min)&&isNaN(e.max)}getLastBase(e){return e.filter(this.checkIsBaseItem).reduce(((e,t)=>t.value),NaN)}getQueryAndPropCSS(e,t,l,n,a){let o,r,i,s="";return isNaN(t)||(o=t+"px",r=`(min-width:${o})`,s=s?s+" and "+r:r),isNaN(l)||(o=l+"px",i=`(max-width:${o})`,s=s?s+" and "+i:i),{query:s?`@container autogrid ${s}`:"",value:`${n}:${e}px;`}}dataCollection(e,t){let{query:l,value:n}=this.getQueryAndPropCSS(e.value,e.min,e.max,t,this.otherData);this.QUERY_AND_PROPS_CSS[l]||(this.QUERY_AND_PROPS_CSS[l]=[]),this.QUERY_AND_PROPS_CSS[l].push(n)}queryAndProps_toStyleCSS(){for(let e in this.QUERY_AND_PROPS_CSS)this.STYLE_CSS+=e+`{${this.selector}{${this.QUERY_AND_PROPS_CSS[e].join("")}}}`;this.QUERY_AND_PROPS_CSS={}}getCSS(){return this.STYLE_CSS}}class i extends r{getQueryAndPropCSS(e,t,l,n,{minWidthBlock:a}){let o,r,i,s="";return isNaN(t)||(o=a*(t+1)+"px",r=`(min-width:${o})`,s=s?s+" and "+r:r),isNaN(l)||(o=a*(l+1)+"px",i=`(max-width:${o})`,s=s?s+" and "+i:i),{query:s?`@container autogrid ${s}`:"",value:`${n}:${e};`}}}const s=JSON.parse('{"u2":"andreslav/autogrid-item"}'),c={svg:(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},(0,e.createElement)("path",{fill:"#000",fillRule:"evenodd",d:"M4 8.6l.1-1 .4-.5L5.6 7H8v4H4V8.6zM7 14H5v2h2v-2zm-2-1H4v2.4l.1 1 .4.5 1.1.1H8v-4H5zm6-5h2v2h-2V8zm-1-1h4v4h-4V7zm9 7h-8v2h8v-2zm-8-1h-1v4h8.4l1-.1.5-.4.1-1.1V13h-9zm6-5h2v2h-2V8zm-1-1h2.4l1 .1.5.4.1 1.1V11h-4V7z",clipRule:"evenodd"}))};(0,t.registerBlockType)(s.u2,{icon:c.svg,edit:function({attributes:t,setAttributes:r,context:s,clientId:c}){const u="block-"+c,m=(t.sizes,parseInt(s["autogrid/minWidth"])),d=new i({selector:`#${u}`,otherData:{minWidthBlock:m}}),h=d.apply({sizes:t.sizes.map((e=>({value:e.numberOfTracks,min:e.startColumn,max:e.endColumn}))),propName:"--grid-item-column-span"}),p=d.getCSS(),_=parseInt(s["autogrid/columnCount"]),[b,k]=(0,e.useState)(1);return(0,e.useEffect)((()=>{if(b)k(0);else{let e=t.sizes.map(((e,t)=>{let l=e.startColumn;return e.numberOfTracks,{startColumn:l,numberOfTracks:1,endColumn:e.endColumn}}));r({sizes:e})}}),[_]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{...(0,l.useBlockProps)({style:{"--grid-item-column-span":isNaN(h)?"":h}})},(0,e.createElement)("div",{className:"wp-block-andreslav-autogrid-item__content"},(0,e.createElement)(l.InnerBlocks,{template:[["core/paragraph",{}]],orientation:"horizontal"})),p&&(0,e.createElement)("style",null,p)),(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:"Settings"},(0,e.createElement)(a.BaseControl,{__nextHasNoMarginBottom:!0,help:(0,e.createElement)("span",{style:{fontSize:"12px"}},(0,n.__)("By default, a block occupies a single column. This option allows you to change this.","autogrid-block"),(0,e.createElement)(o,{title:(0,n.__)("Block size","autogrid-block")},(0,n.__)("By default, a block occupies a single column. This option allows you to change this by specifying rules:","autogrid-block"),(0,e.createElement)("br",null),(0,n.__)("1. The number of columns the block should occupy.","autogrid-block"),(0,e.createElement)("br",null),(0,n.__)("2. The minimum number of columns to be displayed when the rule should start to apply (optional).","autogrid-block"),(0,e.createElement)("br",null),(0,n.__)("3. The maximum number of columns to be displayed when the rule should stop applying (not a mandatory parameter).","autogrid-block"),(0,e.createElement)("br",null),(0,n.__)("If more than one rule is created, the lower one has higher priority.","autogrid-block")))},(0,e.createElement)(a.Flex,null,(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.BaseControl.VisualLabel,null,(0,n.__)("Block size","autogrid-block"))),(0,e.createElement)(a.FlexItem,null,(0,e.createElement)(a.Button,{icon:(0,e.createElement)(a.Dashicon,{icon:"plus-alt2"}),label:(0,n.__)("Add a rule","autogrid-block"),onClick:()=>{r({sizes:[{startColumn:_-1,numberOfTracks:1,endColumn:""},...t.sizes]})}}))),!!t.sizes.length&&(0,e.createElement)(a.Flex,null,(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.BaseControl.VisualLabel,null,(0,n.__)("Ð¡olumns","autogrid-block"))),(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.BaseControl.VisualLabel,null,(0,n.__)("Min","autogrid-block"))),(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.BaseControl.VisualLabel,null,(0,n.__)("Max","autogrid-block"))),(0,e.createElement)(a.FlexItem,null,(0,e.createElement)(a.Button,{icon:(0,e.createElement)(a.Dashicon,{icon:""}),label:"",disabled:!0}))),t.sizes.map(((l,o)=>(0,e.createElement)(a.Flex,{key:o},(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.__experimentalNumberControl,{label:(0,n.__)("Number of columns","autogrid-block"),hideLabelFromVision:!0,onChange:e=>{l.numberOfTracks=e,r({sizes:[...t.sizes]})},value:l.numberOfTracks,min:1,max:_,required:!0})),(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.__experimentalNumberControl,{label:(0,n.__)("Maximum number of columns displayed.","autogrid-block"),hideLabelFromVision:!0,onChange:e=>{l.startColumn=e,r({sizes:[...t.sizes]})},value:l.startColumn,min:0,max:_})),(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.__experimentalNumberControl,{label:(0,n.__)("Minimum number of columns displayed","autogrid-block"),hideLabelFromVision:!0,onChange:e=>{l.endColumn=e,r({sizes:[...t.sizes]})},value:l.endColumn,min:0,max:_})),(0,e.createElement)(a.FlexItem,null,(0,e.createElement)(a.Button,{icon:(0,e.createElement)(a.Dashicon,{icon:"minus"}),label:(0,n.__)("Delete a rule","autogrid-block"),onClick:()=>{r({sizes:t.sizes.filter(((e,t)=>t!=o))})}})))))))))},save:()=>(0,e.createElement)(l.InnerBlocks.Content,null)})}},l={};function n(e){var a=l[e];if(void 0!==a)return a.exports;var o=l[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,l,a,o)=>{if(!l){var r=1/0;for(u=0;u<e.length;u++){l=e[u][0],a=e[u][1],o=e[u][2];for(var i=!0,s=0;s<l.length;s++)(!1&o||r>=o)&&Object.keys(n.O).every((e=>n.O[e](l[s])))?l.splice(s--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[l,a,o]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={74:0,230:0};n.O.j=t=>0===e[t];var t=(t,l)=>{var a,o,r=l[0],i=l[1],s=l[2],c=0;if(r.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(s)var u=s(n)}for(t&&t(l);c<r.length;c++)o=r[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},l=self.webpackChunkautogrid_block=self.webpackChunkautogrid_block||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var a=n.O(void 0,[230],(()=>n(275)));a=n.O(a)})();